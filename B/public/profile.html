<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>Profile</title>
  <link rel="stylesheet" href="profile.css">
</head>

<body>

<!-- ===== LOADER ===== -->
<div id="loader" style="
  height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  font-size:18px;">
  Loading...
</div>

<!-- ===== PROFILE PAGE ===== -->
<div id="profilePage" class="profile-page" style="display:none;">

  <!-- ===== PROFILE HEADER ===== -->
  <div class="profile-header">
    <img id="profilePic" />
    <div class="profile-info">
      <h2 id="profileTitle">Profile</h2>

      <input id="nameInput" placeholder="Your name" disabled />
      <textarea id="bio" placeholder="Your bio" disabled></textarea>

      <div class="edit-actions owner-only">
        <button id="editProfileBtn" onclick="enableProfileEdit()">âœï¸ Edit</button>
        <button id="saveBtn" onclick="updateProfile()">ğŸ’¾ Save</button>
      </div>

      <input type="file" id="profilePicInput" class="owner-only" />
    </div>
  </div>

  <!-- ===== STATS ===== -->
  <div class="profile-stats">
    <span onclick="openFollowers()">ğŸ‘¥ <b id="followersCount">0</b> Followers</span>
    <span onclick="openFollowing()">â¡ï¸ <b id="followingCount">0</b> Following</span>
  </div>

  <!-- ===== ACTION BUTTONS ===== -->
  <div class="profile-actions">
    <button id="chatBtn" onclick="openDM()">Chat</button>
    <button id="callBtn" onclick="startCall()" style="display:none">ğŸ“ Call</button>
    <button id="followBtn" onclick="toggleFollow()">Follow</button>
    <button id="requestAccessBtn">Request Access</button>
  </div>

  <!-- ğŸ”¥ CALL CONTROLS (VERY IMPORTANT) -->
  <div id="callControls" style="display:none; margin:10px 0; text-align:center;">
    <button id="acceptCallBtn" style="display:none">âœ… Accept</button>
    <button id="rejectCallBtn" style="display:none">âŒ Reject</button>
  </div>

  <button id="endCallBtn" style="display:none">âŒ End Call</button>

  <audio id="remoteAudio" autoplay></audio>

  <!-- ===== POSTS ===== -->
  <section class="section">
    <h3>Posts</h3>
    <div id="posts"></div>
  </section>

  <!-- ===== PERSONAL POSTS ===== -->
  <section class="section">
    <h3>ğŸ”’ Personal Posts</h3>
    <div id="personalPosts"></div>
  </section>

</div>

<!-- ===== FOLLOW MODAL ===== -->
<div id="followModal" class="modal">
  <div class="modal-box">
    <h3 id="modalTitle"></h3>
    <div id="modalList"></div>
    <button onclick="closeModal()">Close</button>
  </div>
</div>

<!-- ===== FULL IMAGE VIEW ===== -->
<div id="fullPicOverlay" style="display:none">
  <button onclick="closeFullPic()">â¬…ï¸</button>
  <img id="fullPicImg" />
</div>

<script>
window.onload = () => {
  document.getElementById("loader").style.display = "none";
  document.getElementById("profilePage").style.display = "block";
};
</script>

<script src="profile.js"></script>
</body>
</html>
