<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
</head>
<body>

<style>
* {
  box-sizing: border-box;
}

input, textarea, select, button {
  font-size: 16px;
}

#postText,
#postImage,
#postVideo {
  width: 100%;
  max-width: 100%;
}

button {
  touch-action: manipulation;
}
html, body {
  width: 100%;
  height: 100%;
  margin: 0;
  padding: 0;
  overflow-x: hidden;
}

  .pd-item {
    padding:10px;
    cursor:pointer;
  }
  .pd-item:hover {
    background:#f2f2f2;
  }

  @keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
  }
</style>

<!-- SEARCH -->
<div style="position:relative;margin:10px 0">
  <input id="userSearch" placeholder="Search users..." style="width:100%;padding:8px">
  <div id="searchResults"
       style="position:absolute;top:38px;left:0;width:100%;background:#fff;
              border:1px solid #ccc;z-index:100;display:none">
  </div>
</div>

<!-- HEADER -->
<div style="display:flex;justify-content:space-between;align-items:center;padding:10px;border-bottom:1px solid #ccc;">
  <h3>sonali+snigdho </h3>

  <div style="position:relative;">
    <img
      id="profileMenuBtn"
      src="https://via.placeholder.com/40"
      style="width:40px;height:40px;border-radius:50%;cursor:pointer"
    />

    <div
      id="profileDropdown"
      style="display:none;position:absolute;right:0;top:45px;background:#fff;
             border:1px solid #ccc;border-radius:6px;min-width:160px;
             box-shadow:0 4px 10px rgba(0,0,0,0.15);z-index:1000;"
    >
      <div class="pd-item" onclick="goMyProfile()">ğŸ‘¤ My Profile</div>
      <div class="pd-item">âš™ï¸ Settings</div>
      <div class="pd-item">â“ Help</div>
      <div class="pd-item" onclick="logout()">ğŸšª Logout</div>
    </div>
  </div>
</div>

<!-- TOP BAR -->
<div style="display:flex;justify-content:space-between;padding:10px;border-bottom:1px solid #ccc">
  <b>MyApp</b>
  <div>
    <button onclick="alert('Calling coming soon')">ğŸ“</button>
    <button onclick="location.href='chat.html'">ğŸ’¬</button>
  </div>
</div>

<!-- NOTIFICATION -->
<a href="notifications.html" style="position:relative">
  ğŸ””
  <span id="notifCount"
        style="position:absolute;top:-5px;right:-8px;background:red;color:white;
               font-size:12px;padding:2px 6px;border-radius:50%;">0</span>
</a>

<!-- CREATE POST -->
<textarea id="postText" placeholder="What's on your mind?"></textarea><br>
<input type="file" id="postImage" accept="image/*"><br>
<input type="file" id="postVideo" accept="video/*"><br>
<button onclick="createPost()">Post</button>

<hr>

<!-- FEED -->
<div id="feed"></div>

<!-- MINI UPLOAD INDICATOR (BOTTOM RIGHT) -->
<div id="uploadOverlay"
     style="display:none;position:fixed;bottom:20px;right:20px;z-index:99999;">
  <div style="display:flex;gap:8px;align-items:center;padding:8px;background:#fff;
              border-radius:10px;box-shadow:0 4px 10px rgba(0,0,0,.3);
              position:relative;">

    <!-- PREVIEW -->
    <div id="uploadPreview"
         style="width:48px;height:48px;border-radius:6px;overflow:hidden;
                background:#eee;display:none;">
      <img id="uploadPreviewImg"
           style="width:100%;height:100%;object-fit:cover;display:none">
      <video id="uploadPreviewVideo"
             style="width:100%;height:100%;object-fit:cover;display:none"
             muted></video>
    </div>

    <!-- PROGRESS -->
    <div style="width:44px;height:44px;border-radius:50%;border:5px solid #ddd;
                border-top:5px solid #4caf50;animation:spin 1s linear infinite;
                display:flex;align-items:center;justify-content:center;font-size:11px;">
      <span id="uploadPercent">0%</span>
    </div>

    <!-- CANCEL -->
    <button id="uploadCancelBtn"
      style="position:absolute;top:-8px;right:-8px;width:22px;height:22px;
             background:#f44336;color:#fff;border:none;border-radius:50%;
             cursor:pointer;font-size:12px;">âœ•</button>
  </div>
</div>

<!-- SOCKET -->
<script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>
<script src="feed.js"></script>

</body>
</html>
